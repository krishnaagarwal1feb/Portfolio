<html>
<head>
    <title>threejs - models</title>

    <style>
    	body{
    		margin: 0;
    		overflow: hidden;
    	}
    </style>
</head>
<body>

    <canvas id="myCanvas"></canvas>

    <script src="three.js"></script>
    <script src="GLTFLoader.js"></script>

    <script type = "module">    

    var scene,renderer,camera,stats;
    var model,skeleton,mixer,clock;

    var idleAction;
    var tauntAction;

    init();

    function init() 
    {
    
        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
        camera.position.set( 1, 2, - 3 );
        camera.lookAt( 0, 1, 0 );

        clock = new THREE.Clock();

        scene = new THREE.Scene();
        scene.background = new THREE.Color( 0xa0a0a0 );



        var loader = new THREE.GLTFLoader();
        loader.load( 'AnimatedXBotTaunt.glb', function ( gltf ) {

            model = gltf.scene;
            scene.add( model );
            console.log("Model loaded = ");
            console.log(gltf);
            model.traverse( function ( object ) {

                if ( object.isMesh ) object.castShadow = true;

            } );

            //

            skeleton = new THREE.SkeletonHelper( model );
            skeleton.visible = false;
            scene.add( skeleton );
            console.log("Skeleton loaded");
            console.log(skeleton);

            //

            createPanel();


            //

            var animations = gltf.animations;

            mixer = new THREE.AnimationMixer( model );

            tauntAction = mixer.clipAction( animations[ 0 ] );

            actions = [ tauntAction ];

            activateAllActions();

            animate();

        } );
        }

        function animate() {

				// Render loop

				requestAnimationFrame( animate );

				updateCrossFadeControls();

				var mixerUpdateDelta = clock.getDelta();


				mixer.update( mixerUpdateDelta );

				renderer.render( scene, camera );

			}


			
				
    </script>
</body>
</html>
